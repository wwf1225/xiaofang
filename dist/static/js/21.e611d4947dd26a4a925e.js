webpackJsonp([21],{VO9q:function(a,t){},fnwU:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("mvHQ"),i=e.n(n),o=e("Dd8w"),s=e.n(o),r={name:"BizInspectionRecord",data:function(){return{advanced:!1,checkedList:[],indeterminate:!0,checkAll:!1,plainOptions:[],dataSource:[],pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!1,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(a,t){return"显示 "+t[0]+" ~ "+t[1]+" 条记录，共 "+a+" 条记录"}},queryParams:{facilityNo:"",facilityLocation:"",patrolName:"",patrolResult:"",checkedList:[],pageSize:"",pageNum:""},filteredInfo:null,sortedInfo:null,paginationInfo:null,selectedRowKeys:[],loading:!1}},computed:{columns:function(){var a=this;return[{title:"序号",customRender:function(t,e,n){return void 0!==a.pagination.current?10*(a.pagination.current-1)+n+1:n+1},width:150,align:"center"},{title:"消防设施编号",dataIndex:"facilityNo",width:360,align:"center"},{title:"消防设施位置",dataIndex:"facilityLocation",width:380,align:"center"},{title:"设施名称",dataIndex:"facilityName",width:220,align:"center"},{title:"所含设备",dataIndex:"equipmentInclude",width:300,align:"center"},{title:"巡检结果",dataIndex:"patrolResult",width:300,align:"center"},{title:"巡检日期",dataIndex:"patrolDate",width:350,align:"center"},{title:"巡检人",dataIndex:"patrolName",width:150,align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:100,align:"center"}]}},created:function(){this.btnSearch(),this.getCheckBoxList()},methods:{getCheckBoxList:function(){var a=this;this.plainOptions=[],this.loading=!0;this.$post("/dict/findDictByTableNameAndFieldName",s()({},{tableName:"biz_inspection_record",fieldName:"result"})).then(function(t){200===t.data.code&&(a.plainOptions=t.data.data),a.loading=!1}).catch(function(t){a.loading=!1})},onSelectChange:function(a){this.selectedRowKeys=a},btnReset:function(){this.queryParams.facilityNo="",this.queryParams.facilityLocation="",this.queryParams.patrolName="",this.queryParams.checkedList=""},handleTableChange:function(a,t,e){this.paginationInfo=a,this.filteredInfo=t,this.sortedInfo=e,this.btnSearch({sortField:e.field,sortOrder:e.order})},btnSearch:function(){var a=this;this.dataSource=[],this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,this.queryParams.pageSize=this.paginationInfo.pageSize,this.queryParams.pageNum=this.paginationInfo.current):(this.queryParams.pageSize=this.pagination.defaultPageSize,this.queryParams.pageNum=this.pagination.defaultCurrent),this.$post("/business/inspection-record/findPageInspectionRecord",s()({},this.queryParams)).then(function(t){if(200===t.data.code){var e=s()({},a.pagination);e.total=t.data.data.total,a.dataSource=t.data.data.list,a.pagination=e}else a.$message.warning(t.data.msg);a.loading=!1}).catch(function(t){a.loading=!1})},btnDelete:function(){var a=this;if(a.loading=!0,void 0===a.selectedRowKeys||0===a.selectedRowKeys.length)return a.loading=!1,a.$message.warning("请选择要删除的巡检记录");for(var t=[],e=0;e<a.selectedRowKeys.length;e++)t.push(this.dataSource[a.selectedRowKeys[e]].id);a.$confirm({class:"test",title:"确认要删除吗？",onOk:function(){a.$delete("/business/inspection-record/delInspectionRecord/"+t).then(function(t){if(200===t.data.code){if(a.selectedRowKeys.length===a.dataSource.length&&1!==a.pagination.current){var e=s()({},a.pagination);e.current=a.pagination.current-1,a.pagination=e}a.btnSearch(),a.$message.success(t.data.msg)}else a.$message.warning(t.data.msg);a.selectedRowKeys=[],a.loading=!1}).catch(function(){a.loading=!1})},onCancel:function(){a.loading=!1}})},iconEdit:function(a){var t=this;this.loading=!0,this.$get("/business/inspection-record-sub/findInspectionRecordSubById/"+a.id).then(function(a){200===a.data.code?t.$router.push({path:"/business/bizInspectionRecordSub",query:{flag:"2",data:i()(a.data.data)}}):t.$message.warning(a.data.msg),t.loading=!1}).catch(function(){t.loading=!1})}}},c={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[e("div",{class:a.advanced?"search":null},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-row",[e("div",{class:a.advanced?null:"fold"},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"设施编号",labelCol:{span:6},wrapperCol:{span:14}}},[e("a-input",{model:{value:a.queryParams.facilityNo,callback:function(t){a.$set(a.queryParams,"facilityNo",t)},expression:"queryParams.facilityNo"}})],1)],1),a._v(" "),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"设施位置",labelCol:{span:6},wrapperCol:{span:14}}},[e("a-input",{model:{value:a.queryParams.facilityLocation,callback:function(t){a.$set(a.queryParams,"facilityLocation",t)},expression:"queryParams.facilityLocation"}})],1)],1),a._v(" "),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"巡检人",labelCol:{span:6},wrapperCol:{span:14}}},[e("a-input",{model:{value:a.queryParams.patrolName,callback:function(t){a.$set(a.queryParams,"patrolName",t)},expression:"queryParams.patrolName"}})],1)],1),a._v(" "),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[e("a-button",{attrs:{type:"primary"},on:{click:a.btnSearch}},[a._v("查询")]),a._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:a.btnReset}},[a._v("重置")])],1)],1)]),a._v(" "),e("a-row",[e("a-col",{attrs:{span:24}},[e("a-form-item",{attrs:{label:"巡检结果",labelCol:{span:1},wrapperCol:{span:23}}},[e("a-checkbox-group",{staticStyle:{"margin-left":"16px"},model:{value:a.queryParams.checkedList,callback:function(t){a.$set(a.queryParams,"checkedList",t)},expression:"queryParams.checkedList"}},a._l(a.plainOptions,function(t){return e("a-checkbox",{key:t.dictId,attrs:{value:t.dictId}},[a._v(a._s(t.valuee)+"\n                            ")])}))],1)],1)],1),a._v(" "),e("a-row",{staticStyle:{"text-align":"right"}},[e("a-button",{on:{click:a.btnDelete}},[a._v("删除")])],1),a._v(" "),e("br")],1),a._v(" "),e("div",[e("a-table",{ref:"TableInfo",attrs:{columns:a.columns,dataSource:a.dataSource,pagination:a.pagination,rowSelection:{selectedRowKeys:a.selectedRowKeys,onChange:a.onSelectChange},loading:a.loading,bordered:""},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"operation",fn:function(t,n){return[e("a-icon",{attrs:{type:"file-search",title:"查看"},on:{click:function(t){a.iconEdit(n)}}})]}}])})],1)],1)])},staticRenderFns:[]},l=e("VU/8")(r,c,!1,function(a){e("VO9q")},"data-v-671604b6",null);t.default=l.exports}});