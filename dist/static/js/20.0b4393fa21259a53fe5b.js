webpackJsonp([20],{"477J":function(t,a){},"yXm/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("mvHQ"),i=e.n(n),o=e("Dd8w"),r=e.n(o),s={name:"BaseFacility",data:function(){return{advanced:!1,dataSource:[],pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!1,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(t,a){return"显示 "+a[0]+" ~ "+a[1]+" 条记录，共 "+t+" 条记录"}},queryParams:{facilityId:"",facilityLocation:"",pageSize:"",pageNum:""},selectedRowKeys:[],loading:!1,filteredInfo:null,sortedInfo:null,paginationInfo:null}},computed:{columns:function(){var t=this;return[{title:"序号",customRender:function(a,e,n){return void 0!==t.pagination.current?10*(t.pagination.current-1)+n+1:n+1},width:150,align:"center"},{title:"消防设施编号",dataIndex:"facilityNo",width:360,align:"center"},{title:"消防设施位置",dataIndex:"facilityLocation",width:380,align:"center"},{title:"设施名称",dataIndex:"facilityName",width:220,align:"center"},{title:"所含设备",dataIndex:"equipmentInclude",width:300,align:"center"},{title:"巡检周期(天)",dataIndex:"patrolPeriod",width:350,align:"center"},{title:"巡检人",dataIndex:"periodName",width:150,align:"center"},{title:"维修人",dataIndex:"maintainName",width:150,align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:100,align:"center"}]}},created:function(){this.btnSearch()},methods:{onSelectChange:function(t){this.selectedRowKeys=t},handleTableChange:function(t,a,e){this.paginationInfo=t,this.filteredInfo=a,this.sortedInfo=e,this.btnSearch({sortField:e.field,sortOrder:e.order})},btnSearch:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.loading=!0,this.dataSource=[],this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,this.queryParams.pageSize=this.paginationInfo.pageSize,this.queryParams.pageNum=this.paginationInfo.current):(this.queryParams.pageSize=this.pagination.defaultPageSize,this.queryParams.pageNum=this.pagination.defaultCurrent),this.$post("/base/facility/findPageBaseFacility",r()({},this.queryParams)).then(function(a){if(200===a.data.code){var e=r()({},t.pagination);e.total=a.data.data.total,t.dataSource=a.data.data.list,t.pagination=e}else t.$message.info(a.data.msg);t.loading=!1}).catch(function(){t.loading=!1})},btnReset:function(){this.queryParams.facilityNo="",this.queryParams.facilityLocation=""},btnAdd:function(){this.$router.push({path:"/base/baseFacilitySub",query:{flag:"1"}})},iconPrint:function(t){var a=this;this.loading=!0,this.$get("/base/facility-sub/findBaseFacilitySub/"+t.id).then(function(t){200===t.data.code?a.$router.push({path:"/base/baseFacilityPrint",query:{data:t.data.data}}):a.$message.warning(t.data.msg),a.loading=!1}).catch(function(){a.loading=!1})},iconEdit:function(t){var a=this;this.loading=!0,this.$get("/base/facility-sub/findBaseFacilitySub/"+t.id).then(function(t){200===t.data.code?a.$router.push({path:"/base/baseFacilitySub",query:{flag:"2",data:i()(t.data.data)}}):a.$message.warning(t.data.msg),a.loading=!1}).catch(function(){a.loading=!1})},btnDelete:function(){var t=this;if(t.loading=!0,0===t.selectedRowKeys.length||void 0===t.selectedRowKeys)return t.loading=!1,this.$message.warning("请先选择要删除的设施！");for(var a=[],e=0;e<t.selectedRowKeys.length;e++)a.push(this.dataSource[t.selectedRowKeys[e]].id);t.$confirm({class:"test",title:"确认要删除吗？",onOk:function(){t.$delete("/base/facility/delBaseFacility/"+a).then(function(a){if(200===a.data.code){if(t.$message.success(a.data.msg),t.selectedRowKeys.length===t.dataSource.length&&1!==t.pagination.current){var e=r()({},t.pagination);e.current=t.pagination.current-1,t.pagination=e}t.btnSearch()}else t.$message.warning(a.data.msg);t.selectedRowKeys=[],t.loading=!1}).catch(function(){t.loading=!1})},onCancel:function(){t.loading=!1}})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[e("div",{class:t.advanced?"search":null},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-row",[e("div",{class:t.advanced?null:"fold"},[e("a-col",{attrs:{span:8}},[e("a-form-item",{attrs:{label:"设施编号",labelCol:{span:5},wrapperCol:{span:14}}},[e("a-input",{model:{value:t.queryParams.facilityNo,callback:function(a){t.$set(t.queryParams,"facilityNo",a)},expression:"queryParams.facilityNo"}})],1)],1),t._v(" "),e("a-col",{attrs:{span:8}},[e("a-form-item",{attrs:{label:"设施位置",labelCol:{span:5},wrapperCol:{span:14}}},[e("a-input",{model:{value:t.queryParams.facilityLocation,callback:function(a){t.$set(t.queryParams,"facilityLocation",a)},expression:"queryParams.facilityLocation"}})],1)],1),t._v(" "),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e("a-form-item",{attrs:{wrapperCol:{span:24}}},[e("a-button",{attrs:{type:"primary"},on:{click:t.btnSearch}},[t._v("查询")]),t._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.btnReset}},[t._v("重置")])],1)],1)],1)])],1),t._v(" "),e("div",{staticClass:"operator"},[e("a-row",[e("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.btnAdd}},[t._v("新增")]),t._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.btnDelete}},[t._v("删除")])],1)],1),t._v(" "),e("a-table",{ref:"TableInfo",attrs:{columns:t.columns,dataSource:t.dataSource,pagination:t.pagination,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},loading:t.loading,bordered:""},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"operation",fn:function(a,n){return[e("a-icon",{attrs:{type:"edit",theme:"twoTone",twoToneColor:"#4a9ff5",title:"编辑"},on:{click:function(a){t.iconEdit(n)}}}),t._v(" "),e("a-icon",{attrs:{type:"printer",theme:"twoTone",twoToneColor:"#4a9ff5",title:"打印"},on:{click:function(a){t.iconPrint(n)}}})]}}])})],1)])},staticRenderFns:[]},c=e("VU/8")(s,l,!1,function(t){e("477J")},"data-v-688c035d",null);a.default=c.exports}});