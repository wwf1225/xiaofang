webpackJsonp([11],{Vjyl:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("mvHQ"),i=t.n(n),r=t("Dd8w"),o=t.n(r),s={name:"BaseEquipment",data:function(){return{advanced:!1,dataSource:[],pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!1,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e,a){return"显示 "+a[0]+" ~ "+a[1]+" 条记录，共 "+e+" 条记录"}},queryParams:{equipmentName:"",remindInterval:"",pageSize:"",pageNum:""},filteredInfo:null,sortedInfo:null,paginationInfo:null,selectedRowKeys:[],loading:!1}},computed:{columns:function(){var e=this;return[{title:"序号",customRender:function(a,t,n){return void 0!==e.pagination.current?10*(e.pagination.current-1)+n+1:n+1},align:"center"},{title:"设备名称",dataIndex:"equipmentName",align:"center"},{title:"提醒间隔(天)",dataIndex:"remindInterval",align:"center"},{title:"巡检项目",dataIndex:"countNum",align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"}]}},created:function(){this.btnSearch()},methods:{onSelectChange:function(e){this.selectedRowKeys=e},handleTableChange:function(e,a,t){this.paginationInfo=e,this.filteredInfo=a,this.sortedInfo=t,this.btnSearch({sortField:t.field,sortOrder:t.order})},btnSearch:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.loading=!0,this.dataSource=[],this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,this.queryParams.pageSize=this.paginationInfo.pageSize,this.queryParams.pageNum=this.paginationInfo.current):(this.queryParams.pageSize=this.pagination.defaultPageSize,this.queryParams.pageNum=this.pagination.defaultCurrent),this.$post("/base/equipment/findPageBaseEquipment",o()({},this.queryParams)).then(function(a){if(200===a.data.code){var t=o()({},e.pagination);t.total=a.data.data.total,e.dataSource=a.data.data.list,e.pagination=t}else e.$message.info(a.data.msg);e.loading=!1}).catch(function(){e.loading=!1})},btnAdd:function(){this.$router.push({path:"/base/baseEquipmentSub",query:{flag:"1"}})},btnReset:function(){this.queryParams.equipmentName="",this.queryParams.remindInterval=""},iconEdit:function(e){var a=this;this.loading=!0,this.$get("/base/equipment-sub/findBaseEquipmentSub/"+e.id).then(function(e){200===e.data.code?a.$router.push({path:"/base/baseEquipmentSub",query:{flag:"2",data:i()(e.data.data)}}):a.$message.warning(e.data.msg),a.loading=!1}).catch(function(){a.loading=!1})},batchDelete:function(){var e=this;if(e.loading=!0,0===e.selectedRowKeys.length||void 0===e.selectedRowKeys)return e.loading=!1,e.$message.warning("请先选择要删除的设备！");for(var a=[],t=0;t<e.selectedRowKeys.length;t++)a.push(e.dataSource[e.selectedRowKeys[t]].id);e.$confirm({class:"test",title:"确认要删除吗？",onOk:function(){e.$delete("/base/equipment/delBaseEquipment/"+a).then(function(a){if(200===a.data.code){if(e.$message.success(a.data.msg),e.selectedRowKeys.length===e.dataSource.length&&1!==e.pagination.current){var t=o()({},e.pagination);t.current=e.pagination.current-1,e.pagination=t}e.btnSearch()}else e.$message.warning(a.data.msg);e.selectedRowKeys=[],e.loading=!1}).catch(function(){e.loading=!1})},onCancel:function(){e.loading=!1}})}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[t("div",{class:e.advanced?"search":null},[t("a-form",{attrs:{layout:"horizontal",form:e.queryParams}},[t("a-row",[t("div",{class:e.advanced?null:"fold"},[t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"设备名称",labelCol:{span:5},wrapperCol:{span:14}}},[t("a-input",{model:{value:e.queryParams.equipmentName,callback:function(a){e.$set(e.queryParams,"equipmentName",a)},expression:"queryParams.equipmentName"}})],1)],1),e._v(" "),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"提醒间隔(天)",labelCol:{span:5},wrapperCol:{span:14}}},[t("a-input",{model:{value:e.queryParams.remindInterval,callback:function(a){e.$set(e.queryParams,"remindInterval",a)},expression:"queryParams.remindInterval"}})],1)],1),e._v(" "),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[t("a-form-item",{attrs:{wrapperCol:{span:24}}},[t("a-button",{attrs:{type:"primary"},on:{click:e.btnSearch}},[e._v("查询")]),e._v(" "),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.btnReset}},[e._v("重置")])],1)],1)],1)])],1)],1),e._v(" "),t("div",{staticClass:"operator"},[t("a-row",[t("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:["user:add"],expression:"['user:add']"}],attrs:{type:"primary",ghost:""},on:{click:e.btnAdd}},[e._v("新增")]),e._v(" "),t("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:["user:delete"],expression:"['user:delete']"}],staticStyle:{"margin-left":"8px"},on:{click:e.batchDelete}},[e._v("删除")])],1)],1),e._v(" "),t("div",[t("a-row",[t("a-table",{ref:"TableInfo",attrs:{columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},loading:e.loading,bordered:""},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(a,n){return[t("a-icon",{attrs:{type:"edit",theme:"twoTone",twoToneColor:"#4a9ff5",title:"编辑"},on:{click:function(a){e.iconEdit(n)}}})]}}])})],1)],1)])},staticRenderFns:[]},u=t("VU/8")(s,l,!1,function(e){t("fna4")},"data-v-f9da6eb4",null);a.default=u.exports},fna4:function(e,a){}});