webpackJsonp([10],{eMIb:function(e,a){},oPB0:function(e,a,t){e.exports=t.p+"static/img/nav-bottomlfte.513fca6.png"},y0oa:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("mvHQ"),r=t.n(n),s=t("IcnI"),i={name:"BaseEquipmentSub",data:function(){return{advanced:!1,form:this.$form.createForm(this),dataSource:[],params:{id:"",createId:"",modifyId:"",equipmentName:"",remindInterval:"",baseEquipmentSub:[]},rule:{equipmentName:{rules:[{required:!0,message:"请输入设备名称"},{max:20,message:"长度不能超过20"}]},remindInterval:{rules:[{required:!0,message:"请输入提醒间隔"},{pattern:"^(?!0)(?!00)(?:[0-9]{1,3}|1000)$",message:"请输入小于1000且大于0的正整数"}]},checkItem:{rules:[{required:!0,message:"请输入设备名称"},{max:20,message:"长度不能超过20"}]}},loading:!1,flag:""}},computed:{columns:function(){return[{title:"序号",width:80,customRender:function(e,a,t){return""+(t+1)},align:"center"},{title:"检查项",dataIndex:"checkItem",scopedSlots:{customRender:"checkInput"},align:"center"},{title:"正常状态",dataIndex:"normalStatus",width:200,scopedSlots:{customRender:"statusRadio"},align:"center"},{title:"操作",dataIndex:"operation",width:200,scopedSlots:{customRender:"operation"},align:"center"}]}},mounted:function(){if(this.flag=this.$route.query.flag,"1"===this.flag&&this.addRow(),"2"===this.flag){var e=JSON.parse(this.$route.query.data);this.params.id=e.id,this.params.equipmentName=e.equipmentName,this.params.remindInterval=e.remindInterval,this.form.setFieldsValue({equipmentName:e.equipmentName,remindInterval:e.remindInterval.toString().trim()}),this.dataSource=e.baseEquipmentSub}},methods:{addRow:function(){this.dataSource.push({checkItem:"",normalStatus:"是"})},delRow:function(e){this.dataSource.splice(e,1)},aMoveUp:function(e){this.$set(this.dataSource,e,[this.dataSource[e-1],this.dataSource[e-1]=this.dataSource[e]][0])},aMoveDown:function(e){this.$set(this.dataSource,e,[this.dataSource[e+1],this.dataSource[e+1]=this.dataSource[e]][0])},btnSave:function(){var e=this;this.loading=!0,this.form.validateFields(function(a,t){if(!a){var n=[];if(e.dataSource.forEach(function(e){""!==e.checkItem&&n.push(e)}),0===n.length||n===[])return e.loading=!1,e.$message.warning("请至少添加一条检查项内容");e.params.baseEquipmentSub=n,"1"===e.flag&&(e.params.createId=s.a.state.account.user.userId,e.$axios("/base/equipment/addPageBaseEquipment",r()(e.params)).then(function(a){200===a.data.code?(e.$message.success(a.data.msg),e.$router.push({path:"/base/baseEquipment",query:{flag:"1"}})):e.$message.warning(a.data.msg),e.loading=!1}).catch(function(){e.loading=!1})),"2"===e.flag&&(e.params.modifyId=s.a.state.account.user.userId,e.$axios("/base/equipment/updateBaseEquipment",r()(e.params)).then(function(a){200===a.data.code?(e.$message.success(a.data.msg),e.$router.push({path:"/base/baseEquipment",query:{flag:"2"}})):e.$message.warning(a.data.msg),e.loading=!1}).catch(function(){e.loading=!1}))}e.loading=!1})},btnCancel:function(){this.$router.push({path:"/base/baseEquipment"})},emitEmpty:function(){this.params.equipmentName=""}}},o={render:function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[n("div",{class:e.advanced?"search":null},[n("a-form",{attrs:{layout:"horizontal",form:e.form}},[n("a-row",{staticStyle:{"margin-top":"20px"}},[n("div",{class:e.advanced?null:"fold"},[n("a-col",{attrs:{span:8,offset:4}},[n("a-form-item",{attrs:{label:"设备名称",labelCol:{span:6},wrapperCol:{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["equipmentName",e.rule.equipmentName],expression:"[ 'equipmentName', rule.equipmentName]"}],model:{value:e.params.equipmentName,callback:function(a){e.$set(e.params,"equipmentName",a)},expression:"params.equipmentName"}})],1)],1),e._v(" "),n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"提醒间隔(天)",labelCol:{span:7,offset:3},wrapperCol:{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remindInterval",e.rule.remindInterval],expression:"[ 'remindInterval',rule.remindInterval]"}],model:{value:e.params.remindInterval,callback:function(a){e.$set(e.params,"remindInterval",a)},expression:"params.remindInterval"}})],1)],1)],1)])],1)],1),e._v(" "),n("div",[n("a-row",{staticStyle:{"margin-top":"50px"}},[n("a-col",{attrs:{span:20,offset:4}},[n("span",[n("img",{attrs:{src:t("oPB0"),height:"24",width:"5"}})]),e._v(" "),n("span",{staticStyle:{"margin-left":"10px","font-weight":"bold","font-family":"微软雅黑"}},[e._v("检查项")]),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[n("a",{on:{click:e.addRow}},[n("a-icon",{attrs:{type:"plus-circle"}}),e._v("添加")],1)])])],1),e._v(" "),n("a-row",{staticStyle:{"margin-top":"10px"}},[n("a-col",{attrs:{span:16,offset:4}},[n("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,loading:e.loading,bordered:""},scopedSlots:e._u([{key:"checkInput",fn:function(a,t){return[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkItem",e.rule.checkItem],expression:"[ 'checkItem',rule.checkItem]"}],model:{value:t.checkItem,callback:function(a){e.$set(t,"checkItem",a)},expression:"record.checkItem"}})]}},{key:"statusRadio",fn:function(a,t){return[n("a-RadioGroup",{model:{value:t.normalStatus,callback:function(a){e.$set(t,"normalStatus",a)},expression:"record.normalStatus"}},[n("a-Radio",{attrs:{value:"是"}},[e._v("是")]),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}}),e._v(" "),n("a-Radio",{attrs:{value:"否"}},[e._v("否")])],1)]}},{key:"operation",fn:function(a,t,r){return[n("a",{on:{click:function(a){e.delRow(r,t)}}},[n("a-icon",{attrs:{type:"delete",theme:"twoTone",title:"删除"}})],1),e._v(" "),n("span",{staticStyle:{margin:"0px 15px"}},[e._v("|")]),n("a",{attrs:{disabled:0===r},on:{click:function(a){e.aMoveUp(r)}}},[e._v("上移")]),e._v(" "),n("span",{staticStyle:{margin:"0px 15px"}},[e._v("|")]),n("a",{attrs:{disabled:r===e.dataSource.length-1},on:{click:function(a){e.aMoveDown(r)}}},[e._v("下移")])]}}])})],1)],1),e._v(" "),n("a-row",{staticStyle:{"margin-top":"10px"}},[n("a-col",{staticStyle:{"text-align":"center"},attrs:{span:16,offset:4}},[n("a-button",{attrs:{type:"primary",htmlType:"submit"},on:{click:e.btnSave}},[e._v("保存")]),e._v(" "),n("span",{staticStyle:{margin:"0px 10px"}}),e._v(" "),n("a-button",{on:{click:e.btnCancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]},c=t("VU/8")(i,o,!1,function(e){t("eMIb")},"data-v-4b312a55",null);a.default=c.exports}});