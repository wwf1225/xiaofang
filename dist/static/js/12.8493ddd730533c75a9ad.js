webpackJsonp([12],{"9kXT":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("mvHQ"),i=e.n(n),o=e("Dd8w"),s=e.n(o),r={name:"BizInspectionTask",data:function(){return{advanced:!1,dataSource:[],pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!1,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(a,t){return"显示 "+t[0]+" ~ "+t[1]+" 条记录，共 "+a+" 条记录"}},queryParams:{facilityNo:"",facilityLocation:"",patrolName:"",pageSize:"",pageNum:""},filteredInfo:null,sortedInfo:null,paginationInfo:null,selectedRowKeys:[],loading:!1}},computed:{columns:function(){var a=this;return[{title:"序号",customRender:function(t,e,n){return void 0!==a.pagination.current?10*(a.pagination.current-1)+n+1:n+1},width:150,align:"center"},{title:"消防设施编号",dataIndex:"facilityNo",width:360,align:"center"},{title:"消防设施位置",dataIndex:"facilityLocation",width:380,align:"center"},{title:"设施名称",dataIndex:"facilityName",width:220,align:"center"},{title:"所含设备",dataIndex:"equipmentInclude",width:300,align:"center"},{title:"计划巡检日期",dataIndex:"patrolDate",width:350,align:"center"},{title:"巡检人",dataIndex:"patrolName",width:150,align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:100,align:"center"}]}},created:function(){this.btnSearch()},methods:{onSelectChange:function(a){this.selectedRowKeys=a},handleTableChange:function(a,t,e){this.paginationInfo=a,this.filteredInfo=t,this.sortedInfo=e,this.btnSearch({sortField:e.field,sortOrder:e.order})},btnSearch:function(){var a=this;this.loading=!0,this.dataSource=[],this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,this.queryParams.pageSize=this.paginationInfo.pageSize,this.queryParams.pageNum=this.paginationInfo.current):(this.queryParams.pageSize=this.pagination.defaultPageSize,this.queryParams.pageNum=this.pagination.defaultCurrent),this.$post("/business/inspection-task/findPageInspectionTask",s()({},this.queryParams)).then(function(t){if(200===t.data.code){var e=s()({},a.pagination);e.total=t.data.data.total,a.dataSource=t.data.data.list,a.pagination=e}else a.$message.info(t.data.msg);a.loading=!1}).catch(function(t){a.loading=!1})},btnReset:function(){this.queryParams.facilityNo="",this.queryParams.facilityLocation="",this.queryParams.patrolName=""},btnAdd:function(){this.$router.push({path:"/business/BizInspectionTaskSub",query:{flag:"1"}})},btnDelete:function(){var a=this;if(a.loading=!0,0===a.selectedRowKeys.length||void 0===a.selectedRowKeys)return a.loading=!1,this.$message.warning("请先选择要删除的巡检任务！");for(var t=[],e=0;e<a.selectedRowKeys.length;e++)t.push(this.dataSource[a.selectedRowKeys[e]].id);a.$confirm({class:"test",title:"确认要删除吗？",onOk:function(){a.$delete("/business/inspection-task/delInspectionTask/"+t).then(function(t){if(200===t.data.code){if(a.selectedRowKeys.length===a.dataSource.length&&1!==a.pagination.current){var e=s()({},a.pagination);e.current=a.pagination.current-1,a.pagination=e}a.btnSearch(),a.$message.success(t.data.msg)}else a.$message.warning(t.data.msg);a.selectedRowKeys=[],a.loading=!1}).catch(function(){a.loading=!1})},onCancel:function(){a.loading=!1}})},iconEdit:function(a){var t=this;this.loading=!0,this.$get("/business/inspection-task/findInspectionTaskById/"+a.id+"/pc").then(function(a){200===a.data.code?t.$router.push({path:"/business/bizInspectionTaskSub",query:{flag:"2",data:i()(a.data.data)}}):t.$message.warning(a.data.msg),t.loading=!1}).catch(function(){t.loading=!1})}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[e("div",{class:a.advanced?"search":null},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-row",[e("div",{class:a.advanced?null:"fold"},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"设施编号",prop:"facilityNo",labelCol:{span:6},wrapperCol:{span:14}}},[e("a-input",{model:{value:a.queryParams.facilityNo,callback:function(t){a.$set(a.queryParams,"facilityNo",t)},expression:"queryParams.facilityNo"}})],1)],1),a._v(" "),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"设施位置",prop:"facilityLocation",labelCol:{span:6},wrapperCol:{span:14}}},[e("a-input",{model:{value:a.queryParams.facilityLocation,callback:function(t){a.$set(a.queryParams,"facilityLocation",t)},expression:"queryParams.facilityLocation"}})],1)],1),a._v(" "),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"巡检人",prop:"patrolName",labelCol:{span:6},wrapperCol:{span:14}}},[e("a-input",{model:{value:a.queryParams.patrolName,callback:function(t){a.$set(a.queryParams,"patrolName",t)},expression:"queryParams.patrolName"}})],1)],1),a._v(" "),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[e("a-form-item",{attrs:{wrapperCol:{span:24}}},[e("a-button",{attrs:{type:"primary"},on:{click:a.btnSearch}},[a._v("查询")]),a._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:a.btnReset}},[a._v("重置")])],1)],1)],1)])],1),a._v(" "),e("div",[e("a-row",[e("a-button",{attrs:{type:"primary",ghost:""},on:{click:a.btnAdd}},[a._v("新增")]),a._v(" "),e("a-button",{on:{click:a.btnDelete}},[a._v("删除")])],1)],1),a._v(" "),e("br"),a._v(" "),e("div",[e("a-table",{ref:"TableInfo",attrs:{columns:a.columns,dataSource:a.dataSource,pagination:a.pagination,rowSelection:{selectedRowKeys:a.selectedRowKeys,onChange:a.onSelectChange},loading:a.loading,bordered:""},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"operation",fn:function(t,n){return[e("a-icon",{attrs:{type:"edit",theme:"twoTone",twoToneColor:"#4a9ff5",title:"编辑"},on:{click:function(t){a.iconEdit(n)}}})]}}])})],1)],1)])},staticRenderFns:[]},c=e("VU/8")(r,l,!1,function(a){e("Mep6")},"data-v-f926d0f8",null);t.default=c.exports},Mep6:function(a,t){}});